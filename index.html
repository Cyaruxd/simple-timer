<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Interval Timer</title>
<style>
    body {
        background: #111;
        color: white;
        font-family: Arial, sans-serif;
        text-align: center;
        padding: 40px;
    }

    #timer {
        font-size: 4rem;
        margin-bottom: 20px;
    }

    button {
        padding: 10px 20px;
        font-size: 1.2rem;
        margin: 10px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
    }

    #volumeControl {
        width: 200px;
        margin-top: 20px;
    }

    /* --- BLACKOUT OVERLAY --- */
    #blackout {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 0%;
        background: black;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        font-size: 2rem; /* Medium size */
        opacity: 1;
        transition: height 1.5s ease-in;
        pointer-events: none;
        z-index: 9999;
    }

    .blackout-hide {
        animation: slideUpDisappear 1s forwards;
    }

    @keyframes slideUpDisappear {
        from { height: 100%; }
        to { height: 0%; }
    }

    .pulse {
        animation: pulseOnce 0.6s ease-out forwards;
    }

    @keyframes pulseOnce {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
    }
</style>
</head>


<body>

<h1>Interval Timer</h1>

<div id="timer">60</div>

<button onclick="pauseTimer()">Pause</button>
<button onclick="resumeTimer()">Resume</button>
<button onclick="resetTimer()">Reset</button>

<br>

<label>Volume: </label>
<input type="range" id="volumeControl" min="0" max="1" step="0.01" value="1">

<div id="blackout"></div>

<audio id="beepSound">
    <source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" type="audio/ogg">
</audio>

<script>
    let timeLeft = 60;
    let timerRunning = true;

    const timerDisplay = document.getElementById("timer");
    const beepSound = document.getElementById("beepSound");
    const volumeControl = document.getElementById("volumeControl");

    volumeControl.addEventListener("input", () => {
        beepSound.volume = volumeControl.value;
    });

    function updateTimer() {
        if (!timerRunning) return;

        timeLeft--;

        if (timeLeft <= 0) {
            beepSound.currentTime = 0;
            beepSound.play();

            triggerBlackout(); // Start animation immediately

            timeLeft = 60; // Reset timer immediately
        }

        timerDisplay.textContent = timeLeft;
    }

    setInterval(updateTimer, 1000);

    function pauseTimer() { timerRunning = false; }
    function resumeTimer() { timerRunning = true; }
    function resetTimer() {
        timeLeft = 60;
        timerDisplay.textContent = timeLeft;
    }

    /* --- BLACKOUT ANIMATION FUNCTION --- */
    function triggerBlackout() {
        const blackout = document.getElementById("blackout");

        // Reset state
        blackout.classList.remove("blackout-hide");
        blackout.style.height = "0%";
        blackout.textContent = "";

        requestAnimationFrame(() => {
            blackout.style.height = "100%"; // Rise (1.5s)

            setTimeout(() => {
                blackout.textContent = "Replace Summons";
                blackout.classList.add("pulse");

                // Keep text visible for 3 seconds
                setTimeout(() => {
                    blackout.classList.remove("pulse");

                    // Slide away upward (1s)
                    blackout.classList.add("blackout-hide");

                }, 3000);

            }, 1500); // After upward rise
        });
    }
</script>

</body>
</html>